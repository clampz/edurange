<% if @instance.errors.any? %>
  <% if @instance.errors[:name].any? %>
    $('#modal-instance-add').find('#name-div').addClass('has-error');
    $('#modal-instance-add').find('#name-help').text('<%= @instance.errors[:name][0] %>');
  <% else %>
    $('#modal-instance-add').find('#name-div').removeClass('has-error');
    $('#modal-instance-add').find('#name-help').text('');
  <% end %>
  <% if @instance.errors[:ip_address].any? %>
    $('#modal-instance-add').find('#ip-div').addClass('has-error');
    $('#modal-instance-add').find('#ip-help').text('<%= @instance.errors[:ip_address][0] %>');
  <% else %>
    $('#modal-instance-add').find('#ip-div').removeClass('has-error');
    $('#modal-instance-add').find('#ip-help').text('');
  <% end %>
  <% if @instance.errors[:internet_accessible].any? %>
    $('#modal-instance-add').find('#internet-accessible-div').addClass('has-error');
    $('#modal-instance-add').find('#internet-accessible-help').text('<%= @instance.errors[:internet_accessible][0] %>');
  <% else %>
    $('#modal-instance-add').find('#internet-accessible-div').removeClass('has-error');
    $('#modal-instance-add').find('#internet-accessible-help').text('');
  <% end %>
  <% if @instance.errors[:os].any? %>
    $('#modal-instance-add').find('#os-div').addClass('has-error');
    $('#modal-instance-add').find('#os-help').text('<%= @instance.errors[:os][0] %>');
  <% else %>
    $('#modal-instance-add').find('#os-div').removeClass('has-error');
    $('#modal-instance-add').find('#os-help').text('');
  <% end %>
<% else %>
  $('#subnet-<%= @instance.subnet.id.to_s %>-instances').append("<%= escape_javascript( render('/scenarios/show/instance', instance: @instance).delete("\n") ).html_safe %>");
  $('#modal-instance-add').modal('toggle');
  $('#save-button-li').attr('class', '');
  $('#save-button').attr('href', '/scenarios/<%= @instance.scenario.id %>/save');
  update_flash("Added instance '<%= @instance.name %>' to subnet '<%= @instance.subnet.name %>'.");
<% end %>